<!DOCTYPE html>
<html lang="en">

<head>
  <script>
    (function() {
      var d = new Date(), day = d.getDay(), hm = d.getHours() * 60 + d.getMinutes();
      var open = (day === 5 && hm >= 960 && hm < 1170)
             || (day === 6 && hm >= 450 && hm < 1170)
             || (day === 0 && hm >= 450 && hm < 1020);
      if (!open) window.location.replace('/closed.html');
    })();
  </script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EZ-AZ - The Family Video Game Store</title>
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#00ffc8">
  <link rel="apple-touch-icon" href="/icons/az-192.png">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Inter:wght@400;600;700&display=swap');

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: #0a0a12;
      color: #e0e0e0;
      font-family: 'Inter', 'Segoe UI', sans-serif;
      min-height: 100vh;
    }

    /* Neon flicker animation */
    @keyframes neonFlicker {

      0%,
      19%,
      21%,
      23%,
      25%,
      54%,
      56%,
      100% {
        opacity: 1;
      }

      20%,
      24%,
      55% {
        opacity: 0.6;
      }
    }

    @keyframes float {

      0%,
      100% {
        transform: translateY(0px);
      }

      50% {
        transform: translateY(-8px);
      }
    }

    @keyframes blink {

      0%,
      45%,
      55%,
      100% {
        transform: scaleY(1);
      }

      50% {
        transform: scaleY(0.1);
      }
    }

    @keyframes tailWag {

      0%,
      100% {
        transform: rotate(-10deg);
      }

      50% {
        transform: rotate(10deg);
      }
    }

    @keyframes shelfGlow {

      0%,
      100% {
        box-shadow: 0 0 10px rgba(0, 255, 200, 0.1);
      }

      50% {
        box-shadow: 0 0 20px rgba(0, 255, 200, 0.2);
      }
    }

    /* Store header */
    .store-header {
      text-align: center;
      padding: 40px 20px 20px;
      position: relative;
    }

    .store-name {
      font-family: 'Press Start 2P', monospace;
      font-size: clamp(32px, 6vw, 64px);
      background: linear-gradient(to right, #ff6ec7, #00ffc8, #ffe44d);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: neonFlicker 4s infinite;
      margin-bottom: 8px;
    }

    .store-tagline {
      font-size: 14px;
      color: #888;
      letter-spacing: 2px;
      text-transform: uppercase;
    }

    .store-version {
      font-size: 11px;
      color: #555;
      letter-spacing: 1px;
      margin-top: 4px;
    }

    .update-banner {
      display: none;
      background: linear-gradient(90deg, #00cc88, #00aa66);
      color: #111;
      text-align: center;
      padding: 10px 40px 10px 16px;
      font-size: 13px;
      font-weight: bold;
      letter-spacing: 0.5px;
      position: relative;
      cursor: default;
    }

    .update-banner .dismiss {
      position: absolute;
      right: 12px;
      top: 50%;
      transform: translateY(-50%);
      background: none;
      border: none;
      color: #111;
      font-size: 18px;
      cursor: pointer;
      padding: 4px 8px;
      line-height: 1;
      opacity: 0.6;
    }

    .update-banner .dismiss:hover {
      opacity: 1;
    }

    /* Az section */
    .az-section {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px 20px 40px;
      max-width: 700px;
      margin: 0 auto;
    }

    /* Az the dinosaur */
    .az-container {
      animation: float 3s ease-in-out infinite;
      margin-bottom: 24px;
    }

    .az-dino {
      position: relative;
      width: 120px;
      height: 140px;
    }

    /* Dino body */
    .az-body {
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 70px;
      height: 80px;
      background: #00cc88;
      border-radius: 35px 35px 20px 20px;
    }

    /* Dino belly */
    .az-belly {
      position: absolute;
      bottom: 8px;
      left: 50%;
      transform: translateX(-50%);
      width: 46px;
      height: 50px;
      background: #66eebb;
      border-radius: 23px 23px 16px 16px;
    }

    /* Dino head */
    .az-head {
      position: absolute;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 60px;
      height: 55px;
      background: #00cc88;
      border-radius: 30px 30px 20px 20px;
      cursor: pointer;
    }

    /* Dino snout */
    .az-snout {
      position: absolute;
      bottom: 4px;
      left: 50%;
      transform: translateX(-50%);
      width: 40px;
      height: 20px;
      background: #00bb77;
      border-radius: 20px;
    }

    .az-nostril {
      position: absolute;
      top: 5px;
      width: 5px;
      height: 4px;
      background: #008855;
      border-radius: 50%;
    }

    .az-nostril.left {
      left: 10px;
    }

    .az-nostril.right {
      right: 10px;
    }

    /* Dino mouth - a smile */
    .az-mouth {
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 24px;
      height: 10px;
      border-bottom: 3px solid #008855;
      border-radius: 0 0 12px 12px;
    }

    /* Dino eyes */
    .az-eye {
      position: absolute;
      top: 14px;
      width: 16px;
      height: 18px;
      background: white;
      border-radius: 50%;
      overflow: hidden;
    }

    .az-eye.left {
      left: 8px;
    }

    .az-eye.right {
      right: 8px;
    }

    .az-pupil {
      position: absolute;
      top: 5px;
      left: 50%;
      transform: translateX(-50%);
      width: 8px;
      height: 9px;
      background: #111;
      border-radius: 50%;
    }

    .az-eyelid {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #00cc88;
      transform-origin: top center;
      animation: blink 4s ease-in-out infinite;
      transform: scaleY(0);
    }

    /* Dino spikes */
    .az-spikes {
      position: absolute;
      top: -6px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 3px;
    }

    .az-spike {
      width: 0;
      height: 0;
      border-left: 5px solid transparent;
      border-right: 5px solid transparent;
      border-bottom: 12px solid #00aa66;
    }

    /* Dino arms */
    .az-arm {
      position: absolute;
      bottom: 40px;
      width: 18px;
      height: 30px;
      background: #00cc88;
      border-radius: 10px;
    }

    .az-arm.left {
      left: -6px;
      transform: rotate(20deg);
    }

    .az-arm.right {
      right: -6px;
      transform: rotate(-20deg);
    }

    /* Dino feet */
    .az-foot {
      position: absolute;
      bottom: -6px;
      width: 24px;
      height: 12px;
      background: #00bb77;
      border-radius: 12px 12px 8px 8px;
    }

    .az-foot.left {
      left: 8px;
    }

    .az-foot.right {
      right: 8px;
    }

    /* Dino tail */
    .az-tail {
      position: absolute;
      bottom: 16px;
      right: -20px;
      width: 30px;
      height: 14px;
      background: #00cc88;
      border-radius: 0 14px 14px 0;
      transform-origin: left center;
      animation: tailWag 2s ease-in-out infinite;
    }

    /* Speech bubble */
    .speech-bubble {
      background: #1a1a2e;
      border: 2px solid #00ffc8;
      border-radius: 16px;
      padding: 20px 24px;
      max-width: 500px;
      position: relative;
      text-align: center;
    }

    .speech-bubble::before {
      content: '';
      position: absolute;
      top: -12px;
      left: 50%;
      transform: translateX(-50%);
      width: 0;
      height: 0;
      border-left: 12px solid transparent;
      border-right: 12px solid transparent;
      border-bottom: 12px solid #00ffc8;
    }

    .speech-bubble::after {
      content: '';
      position: absolute;
      top: -9px;
      left: 50%;
      transform: translateX(-50%);
      width: 0;
      height: 0;
      border-left: 10px solid transparent;
      border-right: 10px solid transparent;
      border-bottom: 10px solid #1a1a2e;
    }

    .speech-bubble p {
      font-size: 16px;
      line-height: 1.6;
      color: #ccc;
    }

    .speech-bubble .az-name {
      font-family: 'Press Start 2P', monospace;
      font-size: 12px;
      color: #00ffc8;
      margin-bottom: 8px;
    }

    /* Game shelf */
    .shelf-section {
      max-width: 900px;
      margin: 0 auto;
      padding: 0 20px 60px;
    }

    .shelf-title {
      font-family: 'Press Start 2P', monospace;
      font-size: clamp(12px, 2.5vw, 18px);
      color: #ffe44d;
      text-align: center;
      margin-bottom: 30px;
      letter-spacing: 2px;
    }

    .shelf {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 30px;
      padding: 30px 20px 40px;
      position: relative;
      animation: shelfGlow 3s ease-in-out infinite;
    }

    /* Wooden shelf underneath */
    .shelf::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 12px;
      background: linear-gradient(to bottom, #5a3a1a, #3d2510);
      border-radius: 2px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
    }

    /* Game box */
    .game-box {
      width: 220px;
      background: #12121f;
      border: 2px solid #2a2a3e;
      border-radius: 8px;
      overflow: hidden;
      cursor: pointer;
      transition: transform 0.2s, border-color 0.2s, box-shadow 0.2s;
      text-decoration: none;
      color: inherit;
      display: block;
      position: relative;
      z-index: 1;
    }

    .game-box:hover {
      transform: translateY(-6px) scale(1.03);
      border-color: #00ffc8;
      box-shadow: 0 8px 30px rgba(0, 255, 200, 0.2);
    }

    .game-box-art {
      width: 100%;
      height: 280px;
      position: relative;
      overflow: hidden;
    }

    .game-box-art canvas {
      width: 100%;
      height: 100%;
    }

    .game-box-info {
      padding: 14px;
      border-top: 2px solid #2a2a3e;
    }

    .game-box-title {
      font-family: 'Press Start 2P', monospace;
      font-size: 9px;
      color: #fff;
      margin-bottom: 6px;
      line-height: 1.5;
    }

    .game-box-creators {
      font-size: 12px;
      color: #00ffc8;
      margin-bottom: 6px;
    }

    .game-box-desc {
      font-size: 12px;
      color: #888;
      line-height: 1.5;
    }

    .game-box-badge {
      display: inline-block;
      font-size: 10px;
      font-weight: 700;
      color: #0a0a12;
      background: #ffe44d;
      padding: 2px 8px;
      border-radius: 4px;
      margin-top: 8px;
      letter-spacing: 0.5px;
    }

    /* Coming soon placeholder */
    .game-box.coming-soon {
      cursor: default;
      border-style: dashed;
      border-color: #1e1e30;
      opacity: 0.6;
    }

    .game-box.coming-soon:hover {
      transform: none;
      border-color: #1e1e30;
      box-shadow: none;
    }

    .game-box-art.placeholder {
      display: flex;
      align-items: center;
      justify-content: center;
      background: #0e0e1a;
    }

    .placeholder-text {
      font-family: 'Press Start 2P', monospace;
      font-size: 11px;
      color: #333;
      text-align: center;
      line-height: 1.8;
    }

    /* Submit CTA */
    .submit-section {
      text-align: center;
      padding: 40px 20px 60px;
      border-top: 1px solid #1a1a2e;
      max-width: 600px;
      margin: 0 auto;
    }

    .submit-section h2 {
      font-family: 'Press Start 2P', monospace;
      font-size: clamp(10px, 2vw, 14px);
      color: #ff6ec7;
      margin-bottom: 16px;
      line-height: 1.8;
    }

    .submit-section p {
      font-size: 15px;
      color: #888;
      line-height: 1.7;
      max-width: 480px;
      margin: 0 auto;
    }

    .submit-section .cta-button {
      display: inline-block;
      margin-top: 20px;
      padding: 14px 28px;
      font-family: 'Press Start 2P', monospace;
      font-size: 11px;
      color: #0a0a12;
      background: #00ffc8;
      border-radius: 6px;
      text-decoration: none;
      transition: transform 0.2s, box-shadow 0.2s;
    }

    .submit-section .cta-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 20px rgba(0, 255, 200, 0.3);
    }

    .built-with {
      text-align: center;
      padding: 40px 20px 60px;
      border-top: 1px solid #1a1a2e;
      max-width: 600px;
      margin: 0 auto;
    }

    .built-with h2 {
      font-family: 'Press Start 2P', monospace;
      font-size: clamp(10px, 2vw, 14px);
      color: #ff6ec7;
      margin-bottom: 16px;
      line-height: 1.8;
    }

    .built-with p {
      font-size: 15px;
      color: #888;
      line-height: 1.7;
      max-width: 480px;
      margin: 0 auto 12px;
    }

    .built-with a {
      color: #f44;
      text-decoration: none;
      font-weight: 600;
    }

    .built-with a:hover {
      text-decoration: underline;
    }

    .tech-list {
      list-style: none;
      padding: 0;
      margin: 16px auto 0;
      display: flex;
      justify-content: center;
      gap: 20px;
      flex-wrap: wrap;
    }

    .tech-list li {
      font-family: 'Press Start 2P', monospace;
      font-size: 9px;
      color: #555;
      letter-spacing: 1px;
    }

    /* Visitor counter */
    .visitor-counter {
      text-align: center;
      padding: 30px 20px;
      border-top: 1px solid #1a1a2e;
      max-width: 600px;
      margin: 0 auto;
    }

    .counter-display {
      display: inline-block;
      font-family: 'Press Start 2P', monospace;
      font-size: 14px;
      color: #33ff33;
      background: #0a0a0a;
      border: 1px solid #1a3a1a;
      padding: 10px 20px;
      border-radius: 4px;
      letter-spacing: 3px;
      text-shadow: 0 0 8px rgba(51, 255, 51, 0.4);
    }

    .counter-label {
      font-size: 11px;
      color: #555;
      margin-top: 6px;
      letter-spacing: 1px;
    }

    /* Footer */
    .store-footer {
      text-align: center;
      padding: 30px 20px;
      border-top: 1px solid #1a1a2e;
      color: #444;
      font-size: 13px;
      line-height: 1.8;
    }

    .store-footer a {
      color: #00ffc8;
      text-decoration: none;
    }

    .store-footer a:hover {
      text-decoration: underline;
    }

    .az-mouth.talking {
      height: 14px;
      border-bottom: none;
      background: #006644;
      border-radius: 4px 4px 12px 12px;
      animation: talk 0.25s infinite alternate;
    }

    @keyframes talk {
      from { height: 8px; }
      to { height: 14px; }
    }

    .az-head:hover {
      background: #00ddaa;
    }
  </style>
</head>

<body>

  <div class="update-banner" id="updateBanner">
    <span id="updateMessage"></span>
    <button class="dismiss" id="dismissBanner" aria-label="Dismiss">&times;</button>
  </div>

  <header class="store-header">
    <h1 class="store-name">EZ-AZ</h1>
    <p class="store-tagline">The Family Video Game Store</p>
    <p class="store-version">20260227.2112</p>
  </header>

  <section class="az-section">
    <div class="az-container">
      <div class="az-dino">
        <!-- Spikes -->
        <div class="az-spikes">
          <div class="az-spike"></div>
          <div class="az-spike"></div>
          <div class="az-spike"></div>
        </div>
        <!-- Head -->
        <div class="az-head">
          <div class="az-eye left">
            <div class="az-pupil"></div>
            <div class="az-eyelid"></div>
          </div>
          <div class="az-eye right">
            <div class="az-pupil"></div>
            <div class="az-eyelid"></div>
          </div>
          <div class="az-snout">
            <div class="az-nostril left"></div>
            <div class="az-nostril right"></div>
            <div class="az-mouth"></div>
          </div>
        </div>
        <!-- Body -->
        <div class="az-body">
          <div class="az-belly"></div>
          <!-- Arms -->
          <div class="az-arm left"></div>
          <div class="az-arm right"></div>
          <!-- Tail -->
          <div class="az-tail"></div>
          <!-- Feet -->
          <div class="az-foot left"></div>
          <div class="az-foot right"></div>
        </div>
      </div>
    </div>

    <div class="speech-bubble">
      <p class="az-name">Az says:</p>
      <p>
        Welcome to EZ-AZ! I'm Az, your friendly neighbourhood dinosaur.
        Grab a game off the shelf and have a go. Everything here was
        built by kids and their families. Some use AI, some are hand
        coded from scratch. Pretty cool, right?
      </p>
    </div>
  </section>

  <section class="shelf-section">
    <h2 class="shelf-title">Pick a game off the shelf</h2>

    <div class="shelf">
      <a href="/games/space-dodge.html" class="game-box">
        <div class="game-box-art">
          <canvas id="spaceDodgeCover" width="220" height="280"></canvas>
        </div>
        <div class="game-box-info">
          <div class="game-box-title">Space Dodge</div>
          <div class="game-box-creators">By Charlie &amp; Cooper</div>
          <div class="game-box-desc">
            2-player co-op space shooter. 6 worlds, epic bosses and power-ups.
            Can you beat the Void King?
          </div>
          <span class="game-box-badge">2 PLAYERS</span>
        </div>
      </a>

      <a href="/games/bloom.html" class="game-box">
        <div class="game-box-art">
          <canvas id="bloomCover" width="220" height="280"></canvas>
        </div>
        <div class="game-box-info">
          <div class="game-box-title">Bloom</div>
          <div class="game-box-creators">By Az</div>
          <div class="game-box-desc">
            Explore a grey world. Find the hearts. Bring it back to life.
          </div>
          <span class="game-box-badge">1 PLAYER</span>
        </div>
      </a>

      <div class="game-box coming-soon">
        <div class="game-box-art placeholder">
          <div class="placeholder-text">Coming<br>Soon</div>
        </div>
        <div class="game-box-info">
          <div class="game-box-title">???</div>
          <div class="game-box-creators">By You?</div>
          <div class="game-box-desc">This shelf spot is waiting for a game. Could it be yours?</div>
        </div>
      </div>

      <div class="game-box coming-soon">
        <div class="game-box-art placeholder">
          <div class="placeholder-text">Coming<br>Soon</div>
        </div>
        <div class="game-box-info">
          <div class="game-box-title">???</div>
          <div class="game-box-creators">By You?</div>
          <div class="game-box-desc">This shelf spot is waiting for a game. Could it be yours?</div>
        </div>
      </div>

      <div class="game-box coming-soon">
        <div class="game-box-art placeholder">
          <div class="placeholder-text">Coming<br>Soon</div>
        </div>
        <div class="game-box-info">
          <div class="game-box-title">???</div>
          <div class="game-box-creators">By You?</div>
          <div class="game-box-desc">This shelf spot is waiting for a game. Could it be yours?</div>
        </div>
      </div>

      <div class="game-box coming-soon">
        <div class="game-box-art placeholder">
          <div class="placeholder-text">Coming<br>Soon</div>
        </div>
        <div class="game-box-info">
          <div class="game-box-title">???</div>
          <div class="game-box-creators">By You?</div>
          <div class="game-box-desc">This shelf spot is waiting for a game. Could it be yours?</div>
        </div>
      </div>
    </div>
  </section>

  <section class="submit-section">
    <h2>Got a game? Put it on the shelf!</h2>
    <p>
      If you and your kids have built a game, we'd love to stock it at EZ-AZ.
      Build it as a single HTML file, open a pull request on GitHub, and we'll
      put it on the shelf for everyone to play.
    </p>
    <a href="/help.html" class="cta-button">Find out how</a>
  </section>

  <section class="built-with">
    <h2>Built with vanilla tools</h2>
    <p>
      No frameworks. No build steps. Just the good stuff. EZ-AZ runs on
      <a href="https://www.ruby-lang.org/">Ruby</a>, HTML, CSS and JavaScript.
      We love Ruby and we love keeping things simple.
    </p>
    <ul class="tech-list">
      <li>Ruby</li>
      <li>HTML</li>
      <li>CSS</li>
      <li>JavaScript</li>
      <li>Canvas</li>
      <li>Web Audio</li>
    </ul>
  </section>

  <section class="visitor-counter" id="visitorCounter" style="display:none;">
    <div class="counter-display" id="counterDisplay"></div>
    <p class="counter-label">visitors to the store</p>
  </section>

  <footer class="store-footer">
    Built by Cooper and Charlie (aged 8), with Jay helping them learn to work with AI.<br>
    Gumdale's first family friendly video game store. Launched 28th February 2026.<br>
    <a href="/licence.html">Licence</a>
  </footer>

  <script>
    // Draw the Space Dodge cover art on the canvas
    (function () {
      const canvas = document.getElementById('spaceDodgeCover');
      if (!canvas) return;
      const ctx = canvas.getContext('2d');
      const W = canvas.width;
      const H = canvas.height;

      // Space background
      const grad = ctx.createLinearGradient(0, 0, 0, H);
      grad.addColorStop(0, '#0b0b2a');
      grad.addColorStop(0.5, '#1a0a2e');
      grad.addColorStop(1, '#0b0b2a');
      ctx.fillStyle = grad;
      ctx.fillRect(0, 0, W, H);

      // Stars
      for (let i = 0; i < 60; i++) {
        const x = Math.random() * W;
        const y = Math.random() * H;
        const r = Math.random() * 1.5 + 0.3;
        const alpha = Math.random() * 0.7 + 0.3;
        ctx.beginPath();
        ctx.arc(x, y, r, 0, Math.PI * 2);
        ctx.fillStyle = `rgba(255, 255, 255, ${alpha})`;
        ctx.fill();
      }

      // Planet in background
      ctx.beginPath();
      ctx.arc(160, 60, 30, 0, Math.PI * 2);
      const planetGrad = ctx.createRadialGradient(155, 55, 5, 160, 60, 30);
      planetGrad.addColorStop(0, '#4a6fff');
      planetGrad.addColorStop(1, '#1a1a4a');
      ctx.fillStyle = planetGrad;
      ctx.fill();

      // Planet ring
      ctx.beginPath();
      ctx.ellipse(160, 60, 44, 10, -0.2, 0, Math.PI * 2);
      ctx.strokeStyle = 'rgba(100, 150, 255, 0.4)';
      ctx.lineWidth = 2;
      ctx.stroke();

      // Ship 1 (Player 1 - blue)
      function drawShip(x, y, color, glowColor) {
        // Glow
        ctx.shadowColor = glowColor;
        ctx.shadowBlur = 15;

        ctx.beginPath();
        ctx.moveTo(x, y - 16);
        ctx.lineTo(x - 12, y + 12);
        ctx.lineTo(x, y + 6);
        ctx.lineTo(x + 12, y + 12);
        ctx.closePath();
        ctx.fillStyle = color;
        ctx.fill();

        // Cockpit
        ctx.beginPath();
        ctx.arc(x, y - 4, 4, 0, Math.PI * 2);
        ctx.fillStyle = glowColor;
        ctx.fill();

        // Engine flame
        ctx.shadowBlur = 0;
        ctx.beginPath();
        ctx.moveTo(x - 5, y + 12);
        ctx.lineTo(x, y + 22);
        ctx.lineTo(x + 5, y + 12);
        ctx.fillStyle = '#ff8800';
        ctx.fill();

        ctx.shadowBlur = 0;
        ctx.shadowColor = 'transparent';
      }

      drawShip(80, 190, '#4488ff', '#66aaff');
      drawShip(140, 200, '#ff8844', '#ffaa66');

      // Laser beams
      ctx.shadowColor = '#ff4444';
      ctx.shadowBlur = 6;
      ctx.strokeStyle = '#ff4444';
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.moveTo(80, 174);
      ctx.lineTo(75, 130);
      ctx.stroke();
      ctx.beginPath();
      ctx.moveTo(140, 184);
      ctx.lineTo(145, 140);
      ctx.stroke();
      ctx.shadowBlur = 0;
      ctx.shadowColor = 'transparent';

      // Asteroids
      function drawAsteroid(x, y, r) {
        ctx.beginPath();
        for (let i = 0; i < 8; i++) {
          const angle = (i / 8) * Math.PI * 2;
          const jitter = r * (0.7 + Math.random() * 0.5);
          const px = x + Math.cos(angle) * jitter;
          const py = y + Math.sin(angle) * jitter;
          if (i === 0) ctx.moveTo(px, py);
          else ctx.lineTo(px, py);
        }
        ctx.closePath();
        ctx.fillStyle = '#555';
        ctx.fill();
        ctx.strokeStyle = '#777';
        ctx.lineWidth = 1;
        ctx.stroke();
      }

      drawAsteroid(40, 120, 12);
      drawAsteroid(180, 130, 9);
      drawAsteroid(110, 100, 7);

      // Explosion / power-up glow
      ctx.beginPath();
      ctx.arc(40, 120, 16, 0, Math.PI * 2);
      ctx.fillStyle = 'rgba(255, 100, 0, 0.15)';
      ctx.fill();

      // Title text
      ctx.shadowColor = '#ff6ec7';
      ctx.shadowBlur = 10;
      ctx.font = 'bold 18px "Press Start 2P", monospace';
      ctx.textAlign = 'center';
      ctx.fillStyle = '#fff';
      ctx.fillText('SPACE', W / 2, H - 48);
      ctx.fillText('DODGE', W / 2, H - 24);
      ctx.shadowBlur = 0;
      ctx.shadowColor = 'transparent';

      // Rating badge
      ctx.fillStyle = '#ffe44d';
      ctx.font = 'bold 10px "Press Start 2P", monospace';
      ctx.textAlign = 'left';
      ctx.fillText('E', 12, 26);
      ctx.strokeStyle = '#ffe44d';
      ctx.lineWidth = 1.5;
      ctx.strokeRect(6, 12, 20, 20);
    })();
  </script>

  <script>
    // Draw the Bloom cover art on the canvas
    (function () {
      const canvas = document.getElementById('bloomCover');
      if (!canvas) return;
      const ctx = canvas.getContext('2d');
      const W = canvas.width;
      const H = canvas.height;

      // Dark grey landscape background
      const grad = ctx.createLinearGradient(0, 0, 0, H);
      grad.addColorStop(0, '#1a1a1a');
      grad.addColorStop(0.6, '#222222');
      grad.addColorStop(1, '#181818');
      ctx.fillStyle = grad;
      ctx.fillRect(0, 0, W, H);

      // Grey hills in background
      ctx.beginPath();
      ctx.moveTo(0, 180);
      ctx.quadraticCurveTo(60, 140, 120, 170);
      ctx.quadraticCurveTo(180, 200, 220, 180);
      ctx.lineTo(220, H);
      ctx.lineTo(0, H);
      ctx.fillStyle = '#252525';
      ctx.fill();

      // Grey ground
      ctx.fillStyle = '#222';
      ctx.fillRect(0, 200, W, H - 200);

      // Grey trees
      for (let i = 0; i < 5; i++) {
        const tx = 20 + i * 45;
        const ty = 140 + (i % 2) * 20;
        ctx.fillStyle = '#2a2a2a';
        ctx.fillRect(tx + 6, ty + 15, 6, 12);
        ctx.beginPath();
        ctx.arc(tx + 9, ty + 10, 12, 0, Math.PI * 2);
        ctx.fillStyle = '#2d2d2d';
        ctx.fill();
      }

      // Glowing heart in the centre
      const hx = W / 2;
      const hy = 130;

      // Colour bloom radius from heart
      const bloomR = 70;
      const bloomGrad = ctx.createRadialGradient(hx, hy, 0, hx, hy, bloomR);
      bloomGrad.addColorStop(0, 'rgba(90, 140, 50, 0.4)');
      bloomGrad.addColorStop(0.5, 'rgba(60, 100, 30, 0.2)');
      bloomGrad.addColorStop(1, 'rgba(0, 0, 0, 0)');
      ctx.fillStyle = bloomGrad;
      ctx.beginPath();
      ctx.arc(hx, hy, bloomR, 0, Math.PI * 2);
      ctx.fill();

      // Heart glow
      ctx.beginPath();
      ctx.arc(hx, hy, 18, 0, Math.PI * 2);
      ctx.fillStyle = 'rgba(255, 80, 128, 0.2)';
      ctx.fill();
      ctx.beginPath();
      ctx.arc(hx, hy, 10, 0, Math.PI * 2);
      ctx.fillStyle = 'rgba(255, 80, 128, 0.3)';
      ctx.fill();

      // Heart shape
      ctx.save();
      ctx.translate(hx, hy);
      ctx.beginPath();
      ctx.moveTo(0, 5);
      ctx.bezierCurveTo(-9, -4, -15, -11, -9, -15);
      ctx.bezierCurveTo(-3, -19, 0, -13, 0, -9);
      ctx.bezierCurveTo(0, -13, 3, -19, 9, -15);
      ctx.bezierCurveTo(15, -11, 9, -4, 0, 5);
      ctx.fillStyle = '#ff5080';
      ctx.fill();
      ctx.restore();

      // Small Az in centre bottom
      const ax = W / 2;
      const ay = 195;

      // Az body
      ctx.fillStyle = '#00cc88';
      ctx.fillRect(ax - 5, ay, 10, 12);
      // Belly
      ctx.fillStyle = '#66eebb';
      ctx.fillRect(ax - 3, ay + 2, 6, 7);
      // Head
      ctx.beginPath();
      ctx.arc(ax, ay - 4, 7, 0, Math.PI * 2);
      ctx.fillStyle = '#00cc88';
      ctx.fill();
      // Spikes
      ctx.fillStyle = '#00aa66';
      for (let s = -1; s <= 1; s++) {
        ctx.beginPath();
        ctx.moveTo(ax + s * 4 - 1.5, ay - 9);
        ctx.lineTo(ax + s * 4, ay - 14);
        ctx.lineTo(ax + s * 4 + 1.5, ay - 9);
        ctx.fill();
      }
      // Eyes
      ctx.fillStyle = 'white';
      ctx.beginPath(); ctx.arc(ax - 3, ay - 5, 2, 0, Math.PI * 2); ctx.fill();
      ctx.beginPath(); ctx.arc(ax + 3, ay - 5, 2, 0, Math.PI * 2); ctx.fill();
      ctx.fillStyle = '#111';
      ctx.beginPath(); ctx.arc(ax - 2.5, ay - 4.5, 1, 0, Math.PI * 2); ctx.fill();
      ctx.beginPath(); ctx.arc(ax + 3.5, ay - 4.5, 1, 0, Math.PI * 2); ctx.fill();
      // Feet
      ctx.fillStyle = '#00bb77';
      ctx.fillRect(ax - 5, ay + 12, 4, 3);
      ctx.fillRect(ax + 1, ay + 12, 4, 3);

      // Title text
      ctx.shadowColor = '#00cc88';
      ctx.shadowBlur = 10;
      ctx.font = 'bold 22px "Press Start 2P", monospace';
      ctx.textAlign = 'center';
      ctx.fillStyle = '#fff';
      ctx.fillText('BLOOM', W / 2, H - 28);
      ctx.shadowBlur = 0;
      ctx.shadowColor = 'transparent';

      // Rating badge
      ctx.fillStyle = '#ffe44d';
      ctx.font = 'bold 10px "Press Start 2P", monospace';
      ctx.textAlign = 'left';
      ctx.fillText('E', 12, 26);
      ctx.strokeStyle = '#ffe44d';
      ctx.lineWidth = 1.5;
      ctx.strokeRect(6, 12, 20, 20);
    })();
  </script>

  <script>
    // Az speaks when you click his head
    (function() {
      const azLines = [
        "Welcome to EZ-AZ! Grab a game and have a blast!",
        "Did you know? Every game here was made by kids!",
        "Hey! You should make a game and put it on the shelf!",
        "I'm Az! I used to be a regular dinosaur, but then I discovered video games.",
        "Pro tip. Start your game simple, then make it awesome.",
        "Two players are better than one. Grab a friend!",
        "You don't need to buy games when you can build them yourself!",
        "Charlie and Cooper built Space Dodge. What will you build?",
        "I love this job. I get to play games all day.",
        "The shelf has room for your game. Just saying.",
        "Every great game starts with a wild idea. What's yours?",
        "Hand coded or AI assisted, we love all games here!",
        "Rawr! That means welcome in dinosaur.",
        "Fun fact. I'm the only dinosaur who runs a video game store.",
        "Boss fights are my favourite part. Don't tell anyone.",
        "If you can imagine it, you can build it!",
        "Come up with a cool gamer name. Every legend needs one.",
        "The Void King thinks he's tough. Prove him wrong!",
      ];

      let lastIndex = -1;
      const head = document.querySelector('.az-head');
      const mouth = document.querySelector('.az-mouth');
      const bubble = document.querySelector('.speech-bubble p:last-child');

      head.addEventListener('click', function() {
        if (speechSynthesis.speaking) return;

        let index;
        do {
          index = Math.floor(Math.random() * azLines.length);
        } while (index === lastIndex && azLines.length > 1);
        lastIndex = index;

        const line = azLines[index];
        bubble.textContent = line;

        const utterance = new SpeechSynthesisUtterance(line);
        utterance.rate = 0.95;
        utterance.pitch = 1.4;

        mouth.classList.add('talking');
        utterance.onend = function() {
          mouth.classList.remove('talking');
        };

        speechSynthesis.speak(utterance);
      });
    })();
  </script>

  <script>
    // Show a banner when Az has shipped something new
    (function () {
      var version = document.querySelector('.store-version');
      if (!version) return;
      var current = version.textContent.trim();
      var seen = localStorage.getItem('ez-az-version');

      if (seen && seen !== current) {
        var messages = [
          "Rawr! I've been tinkering. Check out what's new!",
          "New stuff on the shelf! Have a look around.",
          "Az just restocked. Fresh games and fixes!",
          "Something's different... in a good way. Have a poke around!",
          "The store just got an upgrade. You're welcome.",
        ];
        var msg = messages[Math.floor(Math.random() * messages.length)];
        var banner = document.getElementById('updateBanner');
        document.getElementById('updateMessage').textContent = msg;
        banner.style.display = 'block';

        document.getElementById('dismissBanner').addEventListener('click', function () {
          banner.style.display = 'none';
          localStorage.setItem('ez-az-version', current);
        });
      } else {
        localStorage.setItem('ez-az-version', current);
      }
    })();
  </script>

  <script>
    // Visitor counter
    fetch('/counter')
      .then(function(r) { return r.json(); })
      .then(function(data) {
        document.getElementById('counterDisplay').textContent = data.count.toLocaleString();
        document.getElementById('visitorCounter').style.display = '';
      })
      .catch(function() {});
  </script>

  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('/sw.js');
    }
  </script>

</body>

</html>